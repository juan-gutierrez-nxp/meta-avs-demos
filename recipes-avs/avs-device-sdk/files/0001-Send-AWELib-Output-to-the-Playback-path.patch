From 3ae0b1162bc180eed25e067dc86a1b98046010e3 Mon Sep 17 00:00:00 2001
From: Juan Gutierrez <juan.gutierrez@nxp.com>
Date: Wed, 18 Jul 2018 21:50:10 +0000
Subject: [PATCH 1/2] Send AWELib Output to the Playback path

Signed-off-by: Juan Gutierrez <juan.gutierrez@nxp.com>
---
 SampleApp/src/PortAudioMicrophoneWrapper.cpp | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

diff --git a/SampleApp/src/PortAudioMicrophoneWrapper.cpp b/SampleApp/src/PortAudioMicrophoneWrapper.cpp
index 117336b..3985acb 100644
--- a/SampleApp/src/PortAudioMicrophoneWrapper.cpp
+++ b/SampleApp/src/PortAudioMicrophoneWrapper.cpp
@@ -546,9 +546,7 @@ int PortAudioMicrophoneWrapper::PortAudioHardwareCallback(
     wrapper->m_alertsMediaPlayer->tryPullAppSink(alertsMediaPlayerBuffer, BLOCK_SIZE * NUM_MEDIA_CHANNELS * sizeof(Sample));
 
     for (i =0; i < (BLOCK_SIZE * NUM_MEDIA_CHANNELS); i++) {
-//        avsOutBuffer[i] = speakMediaPlayerBuffer[i] + audioMediaPlayerBuffer[i] + alertsMediaPlayerBuffer[i];
-		  avsOutBuffer[i] = (SAMPLE)(buffer[i] << 16);
-//		  avsOutBuffer[i] = buffer[i];
+		  avsOutBuffer[i] = (SAMPLE)(buffer[i] << 16) + speakMediaPlayerBuffer[i] + audioMediaPlayerBuffer[i] + alertsMediaPlayerBuffer[i];
     }
 
 
@@ -645,7 +643,7 @@ int PortAudioMicrophoneWrapper::PortAudioHardwareCallback(
     }
 
 
-#if 0
+#if 1
     // Prepare hardware output buffer
     for (channel = 0; channel < NUM_HARDWARE_OUTPUT_CHANNELS; channel++) {
         for (i = 0; i < BLOCK_SIZE; i++) {
@@ -655,7 +653,7 @@ int PortAudioMicrophoneWrapper::PortAudioHardwareCallback(
 #endif
 
 
-#if 1
+#if 0
     for (i =0; i < (BLOCK_SIZE * NUM_MEDIA_CHANNELS); i++) {
 //        avsOutBuffer[i] = speakMediaPlayerBuffer[i] + audioMediaPlayerBuffer[i] + alertsMediaPlayerBuffer[i];
          ((SAMPLE *) speakerBuffer)[i] = speakMediaPlayerBuffer[i] + audioMediaPlayerBuffer[i] + alertsMediaPlayerBuffer[i];
-- 
1.9.1

